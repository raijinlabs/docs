# Lucid Documentation — Full Transformation Plan

> Transform `C:\docs` from Mintlify starter kit → production Lucid documentation

## Executive Summary

The `raijinlabs/docs` repo currently contains the **default Mintlify starter kit**. This plan transforms it into the official **LucidLayer API** documentation site, powered by the real OpenAPI spec from `raijin-labs-lucid-ai` SDK.

**API Surface**: 65+ endpoints across 9 groups (Passports, Match, Run, Receipts, Epochs, Payouts, Compute, Health, Agents)
**SDK**: `raijin-labs-lucid-ai` (TypeScript, generated by Speakeasy)
**Base URL**: `https://api.lucid.foundation`
**OpenAPI spec**: `https://raw.githubusercontent.com/raijinlabs/lucid-ai-sdk/main/openapi-with-code-samples.yaml`

---

## Phase 0: Branding & Config (30 min)

### 0.1 Update `docs.json`

> **CRITICAL**: Mintlify only auto-generates endpoint pages when you use `openapi` key in a group **without** `pages`.
> Listing MDX paths like `api-reference/passports/create` does NOT generate endpoint UI — it only works for custom MDX files.

Use **Option A** (recommended): auto-generate all endpoints + keep intro page:

```json
{
  "$schema": "https://mintlify.com/docs.json",
  "theme": "mint",
  "name": "Lucid Documentation",
  "colors": {
    "primary": "#6366F1",
    "light": "#818CF8",
    "dark": "#4F46E5"
  },
  "favicon": "/favicon.svg",
  "logo": {
    "light": "/logo/light.svg",
    "dark": "/logo/dark.svg"
  },
  "navigation": {
    "tabs": [
      {
        "tab": "Guides",
        "groups": [
          {
            "group": "Getting Started",
            "pages": ["index", "quickstart", "authentication", "sdk-installation"]
          },
          {
            "group": "Core Concepts",
            "pages": [
              "concepts/passports",
              "concepts/inference",
              "concepts/receipts",
              "concepts/epochs",
              "concepts/agents"
            ]
          },
          {
            "group": "Guides",
            "pages": [
              "guides/first-inference",
              "guides/passport-management",
              "guides/verifiable-receipts",
              "guides/agent-orchestration",
              "guides/compute-providers"
            ]
          },
          {
            "group": "SDKs",
            "pages": ["sdks/typescript", "sdks/python", "sdks/rest"]
          },
          {
            "group": "AI Tools",
            "pages": ["ai-tools/cursor", "ai-tools/claude-code", "ai-tools/windsurf"]
          }
        ]
      },
      {
        "tab": "API Reference",
        "groups": [
          {
            "group": "API Documentation",
            "pages": ["api-reference/introduction"]
          },
          {
            "group": "API Endpoints",
            "openapi": "https://raw.githubusercontent.com/raijinlabs/lucid-ai-sdk/main/openapi-with-code-samples.yaml"
          }
        ]
      }
    ],
    "global": {
      "anchors": [
        {
          "anchor": "API Status",
          "href": "https://api.lucid.foundation/health",
          "icon": "signal"
        },
        {
          "anchor": "GitHub",
          "href": "https://github.com/raijinlabs",
          "icon": "github"
        }
      ]
    }
  },
  "navbar": {
    "links": [
      {
        "label": "Support",
        "href": "mailto:support@lucid.foundation"
      }
    ],
    "primary": {
      "type": "button",
      "label": "Dashboard",
      "href": "https://app.lucid.foundation"
    }
  },
  "contextual": {
    "options": ["copy", "view", "chatgpt", "claude", "perplexity", "mcp", "cursor", "vscode"]
  },
  "footer": {
    "socials": {
      "x": "https://x.com/raijinlabs",
      "github": "https://github.com/raijinlabs"
    }
  }
}
```

#### Why Option A?

Because `"openapi": "<url>"` with **no `pages` key** tells Mintlify to auto-generate a page for every endpoint in the spec. Mintlify also renders `x-codeSamples` from the spec automatically (the TypeScript SDK samples from Speakeasy will show up). ([Mintlify docs](https://www.mintlify.com/docs/api-playground/openapi-setup))

#### Alternative — Option B: Selective endpoints (curated sidebar)

If you want to show only specific endpoints, set `openapi` at the tab level and reference endpoints as `METHOD /path`:

```json
{
  "tab": "API Reference",
  "openapi": "https://raw.githubusercontent.com/raijinlabs/lucid-ai-sdk/main/openapi-with-code-samples.yaml",
  "groups": [
    {
      "group": "API Documentation",
      "pages": ["api-reference/introduction"]
    },
    {
      "group": "Passports",
      "pages": [
        "GET /v1/passports",
        "POST /v1/passports",
        "GET /v1/passports/{passport_id}",
        "PATCH /v1/passports/{passport_id}",
        "DELETE /v1/passports/{passport_id}",
        "POST /v1/passports/{passport_id}/sync"
      ]
    },
    {
      "group": "Inference",
      "pages": [
        "POST /v1/chat/completions",
        "POST /v1/run/inference",
        "POST /v1/match",
        "POST /v1/match/explain"
      ]
    }
  ]
}
```

> **Warning**: If you list any endpoints manually, Mintlify only shows those endpoints — it won't auto-add the rest. Use Option A if you want all 65+ endpoints without maintenance.

#### Alternative — Option C: Custom MDX per endpoint

For the most important endpoints, create an MDX file with `openapi` in frontmatter:

```mdx
---
title: "Chat Completions"
openapi: "https://raw.githubusercontent.com/raijinlabs/lucid-ai-sdk/main/openapi-with-code-samples.yaml POST /v1/chat/completions"
---

Additional context, architecture notes, etc.
```

### 0.2 Replace Logos
- Replace `logo/light.svg` and `logo/dark.svg` with Lucid/Raijin Labs logos
- Replace `favicon.svg` with Lucid favicon

---

## Phase 1: Core Pages — Guides Tab (2-3 hours)

### 1.1 Homepage (`index.mdx`)

Replace starter kit with Lucid product overview:
- What is LucidLayer? (verifiable AI inference protocol)
- Feature cards: Passports, Inference, Receipts, Epochs, Payouts, Agents
- Links to quickstart and API reference

### 1.2 Quickstart (`quickstart.mdx`)

2-minute quickstart:
1. Install SDK (`npm install raijin-labs-lucid-ai`)
2. List passports
3. Run chat completion
4. Explain what happened (routing, receipt, anchoring)

### 1.3 Authentication (`authentication.mdx`)
- API key management
- `X-Owner-Address` header for passport ownership
- SDK authentication setup

### 1.4 SDK Installation (`sdk-installation.mdx`)
- TypeScript SDK setup (`raijin-labs-lucid-ai`)
- REST API direct usage (curl examples)
- Future: Python SDK

### 1.5 Concept Pages (`concepts/` directory)

| File | Content |
|------|---------|
| `concepts/passports.mdx` | Identity types (model/compute/tool/dataset/agent), lifecycle (active/deprecated/revoked), metadata, tags, ownership |
| `concepts/inference.mdx` | Chat completions, policy-based routing, match/explain, fallback logic, streaming |
| `concepts/receipts.mdx` | Cryptographic receipts, MMR (Merkle Mountain Range), hash verification, signature verification, inclusion proofs |
| `concepts/epochs.mdx` | Epoch lifecycle (open→anchoring→anchored), Solana anchoring, batch verification, stats |
| `concepts/agents.mdx` | Agent init, epoch tracking, planning, accomplish/execute, orchestrator architecture |

### 1.6 Guide Pages (`guides/` directory)

| File | Content |
|------|---------|
| `guides/first-inference.mdx` | Step-by-step: create passport → run inference → verify receipt |
| `guides/passport-management.mdx` | CRUD operations, filtering, tagging, stats |
| `guides/verifiable-receipts.mdx` | Create receipt → get proof → verify on-chain |
| `guides/agent-orchestration.mdx` | Init agent → plan → accomplish → verify |
| `guides/compute-providers.mdx` | Register compute node → heartbeat → health monitoring |

### 1.7 SDK Pages (`sdks/` directory)

| File | Content |
|------|---------|
| `sdks/typescript.mdx` | Full TypeScript SDK reference with all method groups |
| `sdks/python.mdx` | Placeholder ("Coming soon") |
| `sdks/rest.mdx` | Raw REST API usage with curl examples |

---

## Phase 2: API Reference (1 hour)

### 2.1 Using Option A (recommended — zero maintenance)

The `docs.json` config above (Phase 0) is all you need. Mintlify auto-generates:
- A sidebar entry per endpoint (grouped by OpenAPI `tags`)
- Interactive request playground
- Request/response schema display
- TypeScript/curl code samples (from `x-codeSamples` in the spec)

No `api-reference/openapi.json` file needed — Mintlify fetches the spec directly from GitHub.

### 2.2 API Introduction Page (`api-reference/introduction.mdx`)

Content:
- Base URL: `https://api.lucid.foundation`
- Authentication: Bearer token
- API groups table (9 groups, 65+ endpoints)
- SDK installation
- Rate limits table

---

## Phase 3: Delete Starter Kit Content (15 min)

### Files to Delete

```
essentials/code.mdx
essentials/images.mdx
essentials/markdown.mdx
essentials/navigation.mdx
essentials/reusable-snippets.mdx
essentials/settings.mdx
snippets/snippet-intro.mdx
images/hero-dark.png
images/hero-light.png
images/checks-passed.png
development.mdx
```

### Files to Keep/Update

```
ai-tools/cursor.mdx           ← Update with Lucid MCP server config
ai-tools/claude-code.mdx      ← Update with Lucid-specific usage
ai-tools/windsurf.mdx         ← Update with Lucid-specific integration
```

---

## Phase 4: Target Directory Structure

```
c:\docs/
├── docs.json                          # Updated config (Option A)
├── index.mdx                          # Lucid homepage
├── quickstart.mdx                     # 2-minute quickstart
├── authentication.mdx                 # Auth guide
├── sdk-installation.mdx               # SDK setup
│
├── concepts/                          # Core concepts
│   ├── passports.mdx
│   ├── inference.mdx
│   ├── receipts.mdx
│   ├── epochs.mdx
│   └── agents.mdx
│
├── guides/                            # How-to guides
│   ├── first-inference.mdx
│   ├── passport-management.mdx
│   ├── verifiable-receipts.mdx
│   ├── agent-orchestration.mdx
│   └── compute-providers.mdx
│
├── sdks/                              # SDK references
│   ├── typescript.mdx
│   ├── python.mdx
│   └── rest.mdx
│
├── ai-tools/                          # AI tool integration (keep)
│   ├── cursor.mdx
│   ├── claude-code.mdx
│   └── windsurf.mdx
│
├── api-reference/                     # API intro page only
│   └── introduction.mdx               # Mintlify auto-generates the rest
│
├── logo/                              # Brand logos
├── images/                            # Documentation images
├── favicon.svg
├── memory-bank/                       # AI context (keep)
├── .clinerules/                       # Cline rules (keep)
└── docs/                              # Deep-dive docs
    ├── PROJECT_MAP.md
    └── TRANSFORMATION_PLAN.md         # This file
```

---

## Phase 5: Implementation Sprints

### Sprint 1 — MVP (P0, ~3 hours)
1. `docs.json` — Config with Option A nav
2. `index.mdx` — New Lucid homepage
3. `quickstart.mdx` — 2-minute quickstart
4. `authentication.mdx` — Auth guide
5. `api-reference/introduction.mdx` — API overview
6. `concepts/passports.mdx` — Core concept
7. `concepts/inference.mdx` — Core concept
8. `sdks/typescript.mdx` — SDK reference
9. `guides/first-inference.mdx` — Tutorial
10. Delete `essentials/` and `snippets/` directories

**Result**: Functional docs site. All 65+ API endpoints auto-rendered from spec.

### Sprint 2 — Complete Guides (P1, ~3 hours)
11. `sdk-installation.mdx`
12. `concepts/receipts.mdx`
13. `concepts/epochs.mdx`
14. `concepts/agents.mdx`
15. `guides/passport-management.mdx`
16. `guides/verifiable-receipts.mdx`
17. `sdks/rest.mdx`
18. Update AI tools pages

### Sprint 3 — Polish (P2-P3, ~2 hours)
19. `guides/agent-orchestration.mdx`
20. `guides/compute-providers.mdx`
21. Optional: Custom MDX overrides for key endpoints (Option C)
22. `sdks/python.mdx` (placeholder)
23. Add architecture diagrams
24. Update memory bank

---

## API Endpoint Summary (from OpenAPI spec)

### Passports (8 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| POST | `/v1/passports` | Create passport |
| GET | `/v1/passports` | List passports |
| GET | `/v1/passports/{id}` | Get passport |
| PATCH | `/v1/passports/{id}` | Update passport |
| DELETE | `/v1/passports/{id}` | Delete (soft) |
| POST | `/v1/passports/{id}/sync` | Trigger sync |
| GET | `/v1/passports/pending-sync` | List pending syncs |
| GET | `/v1/passports/stats` | Passport stats |

### Inference (5 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| POST | `/v1/chat/completions` | Chat completions (OpenAI-compatible) |
| POST | `/v1/run/inference` | Run inference |
| POST | `/v1/match` | Match model to request |
| POST | `/v1/match/explain` | Match with explanation |
| POST | `/v1/route` | Route request |

### Convenience Aliases (5 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| GET | `/v1/models` | List model passports |
| GET | `/v1/compute` | List compute passports |
| GET | `/v1/tools` | List tool passports |
| GET | `/v1/datasets` | List dataset passports |
| GET | `/v1/agents` | List agent passports |

### Receipts (9 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| POST | `/v1/receipts` | Create receipt |
| GET | `/v1/receipts/{id}` | Get receipt |
| POST | `/v1/receipts/{id}/verify` | Verify receipt |
| GET | `/v1/receipts/{id}/proof` | Get Merkle proof |
| GET | `/v1/verify/{hash}` | Verify by hash |
| GET | `/v1/mmr/root` | Get MMR root |
| GET | `/v1/signer/pubkey` | Get signer public key |
| POST | `/v1/receipts/commit-root` | Commit MMR root |
| POST | `/v1/receipts/commit-roots-batch` | Batch commit |

### Epochs (8 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| GET | `/v1/epochs/current` | Current epoch |
| GET | `/v1/epochs` | List epochs |
| GET | `/v1/epochs/{id}` | Get epoch |
| POST | `/v1/epochs/{id}/retry` | Retry anchoring |
| POST | `/v1/epochs/{id}/verify` | Verify epoch |
| GET | `/v1/epochs/{id}/transaction` | Get anchor tx |
| GET | `/v1/epochs/ready` | Epochs ready to anchor |
| GET | `/v1/epochs/stats` | Epoch statistics |

### Payouts (4 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| POST | `/v1/payouts/calculate` | Calculate payout splits |
| POST | `/v1/payouts/from-receipt` | Calculate from receipt |
| GET | `/v1/payouts/{run_id}` | Get payout |
| GET | `/v1/payouts/{run_id}/verify` | Verify payout |

### Compute (2 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| POST | `/v1/compute/nodes/heartbeat` | Node heartbeat |
| GET | `/v1/compute/nodes/{id}/health` | Node health |

### Health (7 endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| GET | `/health` | System health |
| GET | `/health/live` | Liveness probe |
| GET | `/health/ready` | Readiness probe |
| GET | `/health/database` | Database health |
| GET | `/health/redis` | Redis health |
| GET | `/health/nango` | Nango health |
| GET | `/health/detailed` | Detailed health |

### Agents (14+ endpoints)
| Method | Path | Operation |
|--------|------|-----------|
| POST | `/api/agents/init` | Initialize agent MMR |
| POST | `/api/agents/epoch` | Submit agent epoch |
| POST | `/api/agents/batch-epochs` | Batch submit epochs |
| POST | `/api/agents/proof` | Generate agent proof |
| GET | `/api/agents/{id}/stats` | Agent stats |
| GET | `/api/agents/{id}/history` | Agent history |
| GET | `/api/agents/{id}/root` | Agent MMR root |
| POST | `/api/agents/{id}/verify` | Verify agent |
| GET | `/api/agents` | List agents |
| POST | `/api/agents/plan` | Plan agent goal |
| POST | `/api/agents/accomplish` | Accomplish goal |
| GET | `/api/agents/accomplish/preview` | Preview |
| POST | `/api/agents/execute` | Execute plan |
| POST | `/api/agents/validate` | Validate execution |
| + more | orchestrator health, planner info, executor | |

---

## Key References

- **OpenAPI spec**: `https://raw.githubusercontent.com/raijinlabs/lucid-ai-sdk/main/openapi-with-code-samples.yaml`
- **Local copy**: `c:\docs\openapi-spec.yaml`
- **SDK package**: `raijin-labs-lucid-ai` (TypeScript, Speakeasy-generated)
- **Production API**: `https://api.lucid.foundation`
- **Code samples**: Embedded in OpenAPI spec via `x-codeSamples` (auto-rendered by Mintlify)
- **Mintlify OpenAPI setup**: https://www.mintlify.com/docs/api-playground/openapi-setup
